assignee_summary = completed_tasks.groupby('Assignee').agg(
    Tasks_Completed=('Issue key', 'count'),
    Story_Points_Completed=('Story Points', 'sum')
).reset_index()

assignee_summary['Avg_Story_Points_Per_Task'] = (
    assignee_summary['Story_Points_Completed'] / assignee_summary['Tasks_Completed']
).round(2)


import matplotlib.pyplot as plt

# Set figure and axis
fig, ax = plt.subplots(figsize=(10, 6))

# Bar width and position
bar_width = 0.3
positions = range(len(assignee_summary))

# Plot each bar
ax.bar([p - bar_width for p in positions], assignee_summary['Tasks_Completed'], width=bar_width, label='Tasks Completed', color='steelblue')
ax.bar(positions, assignee_summary['Story_Points_Completed'], width=bar_width, label='Story Points Completed', color='seagreen')
ax.bar([p + bar_width for p in positions], assignee_summary['Avg_Story_Points_Per_Task'], width=bar_width, label='Avg SP per Task', color='orange')

# Labels and formatting
ax.set_xticks(positions)
ax.set_xticklabels(assignee_summary['Assignee'], rotation=45, ha='right', fontsize=10)
ax.set_ylabel('Metric Value', fontsize=12)
ax.set_title('Assignee Task Completion Summary', fontsize=14, fontweight='bold')
ax.legend()
ax.grid(axis='y', linestyle='--', alpha=0.5)

plt.tight_layout()
plt.show()
